(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{136:function(e,t,a){e.exports=a(242)},141:function(e,t,a){},158:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},240:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(6),o=a.n(l),r=(a(141),a(10)),s=a(11),i=a(13),u=a(12),m=a(14),p=a(3),h=a(8),d=a.n(h),v=(a(158),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={userInfo:null,token:""},a.login=function(){var e=a.state.token;d.a.post("https://cnodejs.org/api/v1/accesstoken",{accesstoken:e}).then((function(t){delete t.data.success,a.setState({userInfo:t.data}),localStorage.setItem("token",e),localStorage.setItem("author_id",t.data.id)}))},a.logout=function(){localStorage.removeItem("token"),a.setState({userInfo:null})},a.handleChange=function(e){a.setState({token:e.target.value})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");t&&d.a.post("https://cnodejs.org/api/v1/accesstoken",{accesstoken:t}).then((function(t){delete t.data.success,e.setState({userInfo:t.data})}))}},{key:"render",value:function(){var e=this.state,t=e.userInfo,a=e.token;return c.a.createElement("div",null,c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-inner"},c.a.createElement("div",{className:"header-inner-left"},c.a.createElement("li",{className:"list2 clearfix"}," ",c.a.createElement(p.b,{to:"/"},c.a.createElement("h1",null,c.a.createElement("img",{className:"logo",src:"https://www.vue-js.com/public/images/vue.png",alt:""}),"Vuejs"))),c.a.createElement("input",{className:"login",value:a,onChange:this.handleChange,type:"text"})),c.a.createElement("div",{className:"header-inner-right"},c.a.createElement("li",{className:"list3 clearfix"}," ",c.a.createElement(p.b,{to:"/"},c.a.createElement("button",{className:"home"},"\u9996\u9875"))),c.a.createElement(p.b,{to:"/topic/create"},c.a.createElement("button",null,"\u53d1\u5e03\u8bdd\u9898")),c.a.createElement("button",{onClick:this.login},"\u767b\u5f55")))),t?c.a.createElement("div",{className:"mymessage"},c.a.createElement("p",null,"\u4e2a\u4eba\u4fe1\u606f"),c.a.createElement("img",{className:"avatar_url",src:t.avatar_url,alt:""}),c.a.createElement("span",null,t.loginname),c.a.createElement("button",{onClick:this.logout},"\u767b\u51fa")):"")}}]),t}(n.Component)),g=(a(163),a(33)),E=a(111),f=a(19),b=a.n(f),N=(a(165),a(245)),j=a(246),y=a(60),k=a.n(y),O=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={postlist:null,ups:"",textVal:""},a.textVal=function(e){a.setState({textVal:e})},a.handlerVal=function(e){a.setState({inputVal:e.target.value})},a.ups=function(e){var t=localStorage.getItem("token");t?d.a.post("https://cnodejs.org/api/v1/reply/".concat(e,"/ups"),{accesstoken:t}).then((function(t){var n=localStorage.getItem("author_id"),c=Object(E.a)({},a.state.postlist).replies.find((function(t){return t.id===e}));"up"===t.data.action?c.ups.push(n):c.ups=c.ups.filter((function(e){return e.id!==n}))})):j.a.error("\u8bf7\u5148\u767b\u5f55")},a.addcomment=function(){var e=a.props.match.params.id,t=a.state.textVal,n=localStorage.getItem("token");d.a.post("https://cnodejs.org/api/v1/topic/".concat(e,"/replies"),{accesstoken:n,content:t}).then((function(e){a.setState({ups:e.data})}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;d.a.get("https://cnodejs.org/api/v1/topic/".concat(t)).then((function(t){var a=t.data.data;a.replies.forEach((function(e){e.textarea=!1})),e.setState({postlist:a});var n=new k.a(e.editor);n.customConfig.menus=["head","bold","italic","underline"],n.customConfig.onchange=function(t){e.textVal(t)},n.create()}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.match.params.id;d.a.get("https://cnodejs.org/api/v1/topic/".concat(t)).then((function(t){e.setState({postlist:t.data.data})}))}},{key:"render",value:function(){var e=this,t=this.state.postlist,a=localStorage.getItem("author_id");return c.a.createElement("div",{className:"post"},t?c.a.createElement("div",null," ",c.a.createElement("div",{className:"header1"},c.a.createElement("h2",{className:"title1"},t.title),"\xb7",c.a.createElement("span",null,"\u53d1\u5e03\u4e8e ",b()(t.create_at).fromNow()),"\xb7 ",c.a.createElement("span",null,"\u4f5c\u8005 ",t.author.loginname),"\xb7 ",c.a.createElement("span",null,t.visit_count," \u6d4f\u89c8"),"\xb7",c.a.createElement("span",null,"\u6765\u81ea ",t.tab," ")),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.content}}),c.a.createElement("div",{className:"replay"},t.replies.map((function(t){return c.a.createElement("li",{className:"everycomment clearfix",key:t.id},c.a.createElement("div",{className:"postuser"},c.a.createElement(p.b,{to:"/user/".concat(t.author.loginname)},c.a.createElement("img",{className:"postpic",src:t.author.avatar_url,alt:""})),c.a.createElement(p.b,{to:"/user/".concat(t.author.loginname)},c.a.createElement("span",null,t.author.loginname)),c.a.createElement("span",null,b()(t.create_at).fromNow()),c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.content}}),t.textarea?c.a.createElement("textarea",{name:"",id:"",cols:"50",rows:"3"}):""),c.a.createElement("span",{className:"zan",onClick:function(){return e.ups(t.id)}},c.a.createElement(N.a,{className:"heartzan",style:{color:t.ups.includes(a)?"red":""}})," ",t.ups.length))}))),c.a.createElement("div",{className:"addcom"},c.a.createElement("div",{ref:function(t){return e.editor=t},id:"editor",className:"addcomment"}),c.a.createElement("button",{onClick:this.addcomment},"\u56de\u590d"))):"")}}]),t}(n.Component),w=(a(219),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={userlist:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;d.a.get("https://cnodejs.org/api/v1/user/".concat(t)).then((function(t){e.setState({userlist:t.data.data}),console.log(t.data.data)}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.match.params.id;this.props.location.pathname!==e.location.pathname&&d.a.get("https://cnodejs.org/api/v1/user/".concat(a)).then((function(e){t.setState({userlist:e.data.data})}))}},{key:"render",value:function(){var e=this.state.userlist;return c.a.createElement("div",null,e?c.a.createElement("div",{className:"userpage"},c.a.createElement("div",{className:"mainpage"},c.a.createElement("h3",null,"\u4e3b\u9875"),c.a.createElement("img",{src:e.avatar_url,alt:""})," ",c.a.createElement("span",null,e.loginname)," ",c.a.createElement("br",null)," ",c.a.createElement("span",null,e.score," \u79ef\u5206")," ",c.a.createElement("br",null),c.a.createElement("span",null,"\u6ce8\u518c\u65f6\u95f4 ",b()(e.create_at).fromNow())),c.a.createElement("div",{className:"nowtopic"},c.a.createElement("h3",null,"\u6700\u8fd1\u521b\u5efa\u7684\u8bdd\u9898"),e?e.recent_topics.map((function(e){return c.a.createElement("li",{key:e.id,className:"nowlist"}," ",c.a.createElement(p.b,{to:"/user/".concat(e.author.loginname)},c.a.createElement("img",{className:"author-pic",src:e.author.avatar_url,alt:""})," ")," ",c.a.createElement(p.b,{to:"/post/".concat(e.id)},c.a.createElement("p",{className:"title"},e.title)),c.a.createElement("span",{className:"usertime"},b()(e.last_reply_at).fromNow()))})):""),c.a.createElement("div",{className:"havetopic"},c.a.createElement("h3",null,"\u6700\u8fd1\u521b\u5efa\u7684\u8bdd\u9898"),e?e.recent_replies.map((function(e){return c.a.createElement("li",{key:e.id,className:"havelist"},c.a.createElement(p.b,{to:"/user/".concat(e.author.loginname)},c.a.createElement("img",{className:"author-pic",src:e.author.avatar_url,alt:""}),"  "),c.a.createElement(p.b,{to:"/post/".concat(e.id)},c.a.createElement("p",{className:"title"},e.title)),c.a.createElement("span",{className:"usertime"},b()(e.last_reply_at).fromNow()))})):"")):"")}}]),t}(n.Component)),S=(a(220),a(244)),_=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={postList:null,page:1},a.getType=function(){var e=a.props.location.search;return e.includes("all")||""===e?"all":e.includes("good")?"good":e.includes("weex")?"weex":e.includes("share")?"share":e.includes("ask")?"ask":e.includes("job")?"job":"all"},a.changeSize=function(e){var t=a.getType();a.props.history.push("?tab=".concat(t,"&page=").concat(e)),d.a.get("https://cnodejs.org/api/v1/topics?tab=".concat(t,"&page=").concat(e)).then((function(e){a.setState({postList:e.data})}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search,a=this.state.page,n=t.includes("page")?Number(t.match(/[0-9]{1,2}/)[0]):1;this.setState({page:n});var c=this.getType();d.a.get("https://cnodejs.org/api/v1/topics?tab=".concat(c,"&page=").concat(a)).then((function(t){e.setState({postList:t.data})}))}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.state.page,n=this.props.location.search,c=this.getType();e.location.search!==n&&d.a.get("https://cnodejs.org/api/v1/topics?tab=".concat(c,"&page=").concat(a)).then((function(e){t.setState({postList:e.data})}))}},{key:"render",value:function(){var e=this.state.page,t=this.state.postList,a=this.props.location.search,n=this.getType(),l=[{tab:"all",allNum:1015},{tab:"good",allNum:15},{tab:"weex",allNum:3},{tab:"share",allNum:350},{tab:"ask",allNum:623},{tab:"job",allNum:29}].find(" "===n?"all"===n:function(e){return e.tab.includes(n)}).allNum;return c.a.createElement("div",null,c.a.createElement("ul",{className:"list"},c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("all")||""===a},to:"/?tab=all"},"\u5168\u90e8")),c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("good")},to:"/?tab=good"},"\u7cbe\u534e")),c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("weex")},to:"/?tab=weex"},"weex")),c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("share")},to:"/?tab=share"},"\u5206\u4eab")),c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("ask")},to:"/?tab=ask"},"\u95ee\u7b54")),c.a.createElement("li",null," ",c.a.createElement(p.b,{isActive:function(){return a.includes("job")},to:"/?tab=job"},"\u62db\u8058"))),t?c.a.createElement("div",{className:"main"},t.data.map((function(e){return c.a.createElement("li",{className:"comment",key:e.id},c.a.createElement(p.b,{to:"/user/".concat(e.author.loginname)},c.a.createElement("img",{className:"auther-pic",src:e.author.avatar_url,alt:""})),c.a.createElement("span",{className:"count"},e.reply_count,"/",e.visit_count)," ","all"===n||" "===n?c.a.createElement("button",{className:"tab"},"share"===e.tab?"\u5206\u4eab":"ask"===e.tab?"\u95ee\u7b54":"job"===e.tab?"\u5de5\u4f5c":"\u901a\u7528"):"good"===n?c.a.createElement("button",{className:"good"},"\u7cbe\u534e"):"",c.a.createElement(p.b,{to:"/post/".concat(e.id)},c.a.createElement("p",{className:"title"},e.title)),c.a.createElement("span",{className:"time"},b()(e.create_at).fromNow()))})),c.a.createElement("div",null,c.a.createElement(S.a,{onChange:this.changeSize,defaultCurrent:e,defaultPageSize:20,total:l}))):"")}}]),t}(n.Component),x=a(59),C=(a(240),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={creat:"",selectVal:"",inputVal:"",textVal:""},a.handleChange=function(e,t){a.setState(Object(x.a)({},t,e.target.value))},a.textVal=function(e){a.setState({textVal:e})},a.login=function(){var e=a.state,t=e.selectVal,n=e.inputVal,c=e.textVal,l=localStorage.getItem("token");d.a.post("https://cnodejs.org/api/v1/topics",{title:n,tab:t,accesstoken:l,content:c}).then((function(e){a.props.history.push("/post/".concat(e.data.topic_id))}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new k.a(this.editor);t.customConfig.menus=["head","bold","italic","underline"],t.customConfig.onchange=function(t){e.textVal(t)},t.create()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectVal,n=t.inputVal;return c.a.createElement("div",{className:"creattopic"},c.a.createElement("h3",null,"\u53d1\u5e03\u8bdd\u9898"),c.a.createElement("span",null,"\u9009\u62e9\u677f\u5757:"),c.a.createElement("select",{className:"select",value:a,onChange:function(t){return e.handleChange(t,"selectVal")}},c.a.createElement("option",{value:"weex"},"\u8bf7\u9009\u62e9\u4e00\u4e2a\u9009\u9879"),c.a.createElement("option",{value:"share"},"\u5206\u4eab"),c.a.createElement("option",{value:"ask"},"\u95ee\u7b54"),c.a.createElement("option",{value:"job"},"\u62db\u8058")),c.a.createElement("br",null),c.a.createElement("input",{className:"title5",placeholder:"\u6807\u9898\u5b57\u6570 10 \u5b57\u4ee5\u4e0a",type:"text",value:n,onChange:function(t){return e.handleChange(t,"inputVal")}}),c.a.createElement("div",{className:"contant"},c.a.createElement("div",{ref:function(t){return e.editor=t}}),c.a.createElement("button",{onClick:this.login},"\u63d0\u4ea4")))}}]),t}(n.Component)),V=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(g.a,{exact:!0,path:"/",component:_}),c.a.createElement(g.a,{path:"/post/:id",component:O}),c.a.createElement(g.a,{path:"/user/:id",component:w}),c.a.createElement(g.a,{path:"/topic/create",component:C}))}}]),t}(n.Component),I=Object(g.e)(V),A=(a(241),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return b.a.locale("zh-cn"),c.a.createElement("div",{style:{backgroundColor:"#ccc"},className:"App"},c.a.createElement(p.a,null,c.a.createElement(v,null),c.a.createElement(I,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.e5ee6019.chunk.js.map